name: Store a number

on:
  workflow_dispatch:
    inputs:
      a_number:
        description: 'A number'
        required: true
        type: string

jobs:
  store_number:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout the code
      uses: actions/checkout@v3
    - name: Install jq
      run: sudo apt-get update && sudo apt-get install jq
    - name: Show file
      run: jq . data.json
    - name: Add the data
      run: |
        DATE=`date`
        jq --arg DATE "$DATE" '.data += [{ "number" : "2", "date" : $DATE }]' data.json > newdata.json
        mv newdata.json data.json
    - name: Show file again
      run: jq . data.json
